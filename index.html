<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Text Renderer - Кастомный рендерер текста</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1 class="main-title">CUSTOM TEXT RENDERER</h1>
            <p class="subtitle">Создавай удивительные текстовые эффекты</p>
        </header>

        <main>
            <section class="canvas-container">
                <canvas id="textCanvas" width="800" height="400"></canvas>
            </section>

            <section class="controls">
                <div class="control-group">
                    <label for="textInput">Текст для рендеринга:</label>
                    <input type="text" id="textInput" value="HELLO WORLD!" placeholder="Введите ваш текст...">
                </div>

                <div class="control-group">
                    <label for="fontSize">Размер шрифта: <span class="range-value" id="fontSizeValue">24</span>px</label>
                    <input type="range" id="fontSize" min="12" max="72" value="24">
                </div>

                <div class="control-group">
                    <label for="fontFamily">Шрифт:</label>
                    <select id="fontFamily">
                        <option value="Arial">Arial</option>
                        <option value="Orbitron">Orbitron (Futuristic)</option>
                        <option value="Press Start 2P">Press Start 2P (Pixel)</option>
                        <option value="Russo One">Russo One</option>
                        <option value="Audiowide">Audiowide</option>
                        <option value="Exo 2">Exo 2</option>
                        <option value="Georgia">Georgia</option>
                        <option value="Courier New">Courier New</option>
                    </select>
                </div>

                <div class="control-group">
                    <label for="textColor">Цвет текста:</label>
                    <input type="color" id="textColor" value="#ffffff">
                </div>

                <div class="control-group">
                    <label for="strokeColor">Цвет обводки:</label>
                    <input type="color" id="strokeColor" value="#000000">
                </div>

                <div class="control-group">
                    <label for="strokeWidth">Толщина обводки: <span class="range-value" id="strokeWidthValue">2</span>px</label>
                    <input type="range" id="strokeWidth" min="0" max="10" value="2">
                </div>

                <div class="control-group">
                    <label for="letterSpacing">Межбуквенный интервал: <span class="range-value" id="letterSpacingValue">0</span>px</label>
                    <input type="range" id="letterSpacing" min="0" max="20" value="0">
                </div>

                <div class="control-group">
                    <label for="shadowBlur">Размытие тени: <span class="range-value" id="shadowBlurValue">4</span>px</label>
                    <input type="range" id="shadowBlur" min="0" max="20" value="4">
                </div>

                <div class="control-group">
                    <label for="shadowColor">Цвет тени:</label>
                    <input type="color" id="shadowColor" value="#000000">
                </div>

                <div class="button-group">
                    <button class="btn btn-primary" id="renderBtn">Рендерить</button>
                    <button class="btn btn-secondary" id="clearBtn">Очистить</button>
                    <button class="btn btn-success" id="animateBtn">Анимация</button>
                    <button class="btn btn-warning" id="pixelBtn">Pixel Style</button>
                </div>
            </section>

            <section class="preset-styles">
                <div class="preset-card" data-preset="neon">
                    <h3>NEON</h3>
                    <p>Неоновый стиль с ярким свечением</p>
                </div>
                <div class="preset-card" data-preset="retro">
                    <h3>RETRO</h3>
                    <p>Ретро стиль 80-х</p>
                </div>
                <div class="preset-card" data-preset="cyberpunk">
                    <h3>CYBERPUNK</h3>
                    <p>Киберпанк эстетика</p>
                </div>
                <div class="preset-card" data-preset="minimal">
                    <h3>MINIMAL</h3>
                    <p>Минималистичный стиль</p>
                </div>
                <div class="preset-card" data-preset="bold">
                    <h3>BOLD</h3>
                    <p>Жирный и выразительный</p>
                </div>
                <div class="preset-card" data-preset="elegant">
                    <h3>ELEGANT</h3>
                    <p>Элегантный стиль</p>
                </div>
            </section>
        </main>

        <footer>
            <p class="footer-text">© 2024 Custom Text Renderer | Создано с любовью к тексту</p>
        </footer>
    </div>

    <script src="text-renderer.js"></script>
    <script>
        // Инициализация
        const canvas = document.getElementById('textCanvas');
        const renderer = new CustomTextRenderer(canvas);

        // Получение элементов управления
        const textInput = document.getElementById('textInput');
        const fontSize = document.getElementById('fontSize');
        const fontSizeValue = document.getElementById('fontSizeValue');
        const fontFamily = document.getElementById('fontFamily');
        const textColor = document.getElementById('textColor');
        const strokeColor = document.getElementById('strokeColor');
        const strokeWidth = document.getElementById('strokeWidth');
        const strokeWidthValue = document.getElementById('strokeWidthValue');
        const letterSpacing = document.getElementById('letterSpacing');
        const letterSpacingValue = document.getElementById('letterSpacingValue');
        const shadowBlur = document.getElementById('shadowBlur');
        const shadowBlurValue = document.getElementById('shadowBlurValue');
        const shadowColor = document.getElementById('shadowColor');

        // Кнопки
        const renderBtn = document.getElementById('renderBtn');
        const clearBtn = document.getElementById('clearBtn');
        const animateBtn = document.getElementById('animateBtn');
        const pixelBtn = document.getElementById('pixelBtn');

        // Обновление значений range
        fontSize.addEventListener('input', () => {
            fontSizeValue.textContent = fontSize.value;
        });

        strokeWidth.addEventListener('input', () => {
            strokeWidthValue.textContent = strokeWidth.value;
        });

        letterSpacing.addEventListener('input', () => {
            letterSpacingValue.textContent = letterSpacing.value;
        });

        shadowBlur.addEventListener('input', () => {
            shadowBlurValue.textContent = shadowBlur.value;
        });

        // Функция рендеринга текста
        function renderText() {
            renderer.clear();
            
            // Применение настроек
            renderer.setFont(parseInt(fontSize.value), fontFamily.value);
            renderer.setColor(textColor.value);
            renderer.setStroke(strokeColor.value, parseInt(strokeWidth.value));
            renderer.setLetterSpacing(parseInt(letterSpacing.value));
            renderer.setShadow(shadowColor.value, parseInt(shadowBlur.value), 2, 2);
            
            // Рендеринг текста
            const text = textInput.value || 'HELLO WORLD!';
            renderer.renderText(text, canvas.width / 2, canvas.height / 2, {
                centered: true,
                glowEffect: parseInt(shadowBlur.value) > 10
            });
        }

        // Функция анимации
        function animateText() {
            renderer.clear();
            
            renderer.setFont(parseInt(fontSize.value), fontFamily.value);
            renderer.setColor(textColor.value);
            renderer.setStroke(strokeColor.value, parseInt(strokeWidth.value));
            renderer.setLetterSpacing(parseInt(letterSpacing.value));
            renderer.setShadow(shadowColor.value, parseInt(shadowBlur.value), 2, 2);
            
            const text = textInput.value || 'HELLO WORLD!';
            renderer.renderText(text, canvas.width / 2, canvas.height / 2, {
                centered: true,
                animated: true,
                glowEffect: true
            });
        }

        // Функция рендеринга пиксельного текста
        function renderPixelText() {
            renderer.clear();
            renderer.setColor(textColor.value);
            
            const text = textInput.value || 'HELLO!';
            renderer.renderPixelText(text, canvas.width / 2 - (text.length * 24), canvas.height / 2 - 20, 8);
        }

        // Пресеты
        const presets = {
            neon: {
                fontSize: 48,
                fontFamily: 'Orbitron',
                textColor: '#00ffff',
                strokeColor: '#ff00ff',
                strokeWidth: 2,
                letterSpacing: 4,
                shadowBlur: 20,
                shadowColor: '#00ffff'
            },
            retro: {
                fontSize: 36,
                fontFamily: 'Press Start 2P',
                textColor: '#ff6b6b',
                strokeColor: '#4ecdc4',
                strokeWidth: 3,
                letterSpacing: 2,
                shadowBlur: 8,
                shadowColor: '#000000'
            },
            cyberpunk: {
                fontSize: 42,
                fontFamily: 'Audiowide',
                textColor: '#ff00ff',
                strokeColor: '#00ff00',
                strokeWidth: 2,
                letterSpacing: 6,
                shadowBlur: 15,
                shadowColor: '#ff00ff'
            },
            minimal: {
                fontSize: 32,
                fontFamily: 'Exo 2',
                textColor: '#ffffff',
                strokeColor: '#000000',
                strokeWidth: 0,
                letterSpacing: 0,
                shadowBlur: 2,
                shadowColor: '#000000'
            },
            bold: {
                fontSize: 56,
                fontFamily: 'Russo One',
                textColor: '#ff9800',
                strokeColor: '#000000',
                strokeWidth: 4,
                letterSpacing: 2,
                shadowBlur: 6,
                shadowColor: '#000000'
            },
            elegant: {
                fontSize: 40,
                fontFamily: 'Georgia',
                textColor: '#d4af37',
                strokeColor: '#8b4513',
                strokeWidth: 1,
                letterSpacing: 1,
                shadowBlur: 4,
                shadowColor: '#8b4513'
            }
        };

        // Применение пресета
        function applyPreset(presetName) {
            const preset = presets[presetName];
            if (!preset) return;

            fontSize.value = preset.fontSize;
            fontSizeValue.textContent = preset.fontSize;
            fontFamily.value = preset.fontFamily;
            textColor.value = preset.textColor;
            strokeColor.value = preset.strokeColor;
            strokeWidth.value = preset.strokeWidth;
            strokeWidthValue.textContent = preset.strokeWidth;
            letterSpacing.value = preset.letterSpacing;
            letterSpacingValue.textContent = preset.letterSpacing;
            shadowBlur.value = preset.shadowBlur;
            shadowBlurValue.textContent = preset.shadowBlur;
            shadowColor.value = preset.shadowColor;

            renderText();
            showNotification(`Применен стиль: ${presetName.toUpperCase()}`);
        }

        // Функция показа уведомлений
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Обработчики событий
        renderBtn.addEventListener('click', renderText);
        clearBtn.addEventListener('click', () => {
            renderer.clear();
            showNotification('Холст очищен');
        });
        animateBtn.addEventListener('click', animateText);
        pixelBtn.addEventListener('click', renderPixelText);

        // Обработчики для пресетов
        document.querySelectorAll('.preset-card').forEach(card => {
            card.addEventListener('click', () => {
                const preset = card.dataset.preset;
                applyPreset(preset);
            });
        });

        // Автоматический рендер при изменении параметров
        [textInput, fontSize, fontFamily, textColor, strokeColor, strokeWidth, letterSpacing, shadowBlur, shadowColor].forEach(element => {
            element.addEventListener('change', renderText);
        });

        // Изменение размера холста при изменении размера окна
        function resizeCanvas() {
            const container = document.querySelector('.canvas-container');
            const maxWidth = container.clientWidth - 60;
            
            if (window.innerWidth < 768) {
                canvas.width = Math.min(maxWidth, 400);
                canvas.height = 300;
            } else {
                canvas.width = Math.min(maxWidth, 800);
                canvas.height = 400;
            }
            
            renderText();
        }

        window.addEventListener('resize', resizeCanvas);

        // Инициализация при загрузке
        window.addEventListener('load', () => {
            resizeCanvas();
            renderText();
            showNotification('Добро пожаловать в Custom Text Renderer!');
        });

        // Анимация цикла для анимированных элементов
        function animationLoop() {
            renderer.updateAnimations();
            requestAnimationFrame(animationLoop);
        }

        animationLoop();
    </script>
</body>
</html>
